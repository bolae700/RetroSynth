<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Retro Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #0f0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Rajdhani', sans-serif;
            padding: 10px;
            overflow: hidden;
        }

        .player {
            width: 320px;
            background: linear-gradient(135deg, #001a00 0%, #000800 100%);
            border-radius: 16px;
            box-shadow: 
                0 0 0 2px #0f0,
                0 0 30px rgba(0, 255, 0, 0.7),
                inset 0 0 20px rgba(0, 80, 0, 0.5);
            border: 1px solid #0f0;
            padding: 15px;
            position: relative;
            overflow: hidden;
        }

        .player::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 255, 0, 0.05) 0px,
                rgba(0, 255, 0, 0.05) 1px,
                transparent 1px,
                transparent 2px
            );
            pointer-events: none;
            z-index: 1;
            animation: scanline 8s linear infinite;
        }

        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .header {
            text-align: center;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 22px;
            font-weight: 700;
            text-shadow: 0 0 10px #0f0;
            letter-spacing: 2px;
            margin-bottom: 5px;
            color: #0f0;
            background: linear-gradient(90deg, #0f0, #8f8, #0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 10px;
            color: #8f8;
            letter-spacing: 1px;
        }

        .visualizer {
            position: relative;
            width: 100%;
            height: 80px;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            background: rgba(0, 20, 0, 0.5);
            border: 1px solid #0f0;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
            z-index: 2;
        }

        #waveCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
        }

        .track-info {
            text-align: center;
            margin-bottom: 12px;
            position: relative;
            z-index: 2;
        }

        .track-title {
            font-size: 16px;
            font-weight: 700;
            color: #0f0;
            margin-bottom: 3px;
            text-shadow: 0 0 8px rgba(0, 255, 0, 0.7);
            font-family: 'Orbitron', monospace;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .track-artist {
            font-size: 12px;
            color: #8f8;
            letter-spacing: 1px;
        }

        .progress-container {
            margin-bottom: 12px;
            position: relative;
            z-index: 2;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(0, 30, 0, 0.8);
            border-radius: 3px;
            overflow: hidden;
            border: 1px solid #0f0;
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #0f0, #8f8);
            width: 0%;
            transition: width 0.1s;
            box-shadow: 0 0 10px #0f0;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #8f8;
            margin-top: 5px;
            font-family: 'Orbitron', monospace;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin-bottom: 15px;
            z-index: 2;
            position: relative;
        }

        .control-btn {
            padding: 8px 5px;
            background: linear-gradient(to bottom, #003000, #001000);
            border: 1px solid #0f0;
            border-radius: 6px;
            color: #0f0;
            cursor: pointer;
            font-size: 11px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 600;
            transition: all 0.3s;
            text-shadow: 0 0 5px #0f0;
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.3);
        }

        .control-btn:hover {
            background: linear-gradient(to bottom, #005000, #002000);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.7);
            transform: translateY(-1px);
        }

        .control-btn:active {
            transform: translateY(1px);
        }

        .play-pause {
            grid-column: span 2;
            background: linear-gradient(to bottom, #00a000, #004000);
            font-weight: 700;
            font-size: 12px;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            z-index: 2;
            position: relative;
        }

        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            height: 6px;
            background: rgba(0, 30, 0, 0.8);
            border-radius: 3px;
            outline: none;
            border: 1px solid #0f0;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #0f0;
            cursor: pointer;
            box-shadow: 0 0 8px #0f0;
        }

        .playlist {
            max-height: 180px;
            overflow-y: auto;
            border: 1px solid #0f0;
            border-radius: 8px;
            padding: 8px;
            background: rgba(0, 20, 0, 0.4);
            z-index: 2;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
        }

        .track-item {
            padding: 8px 10px;
            border-bottom: 1px solid rgba(0, 255, 0, 0.3);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
            border-radius: 4px;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .track-item:hover {
            background: rgba(0, 255, 0, 0.1);
            box-shadow: 0 0 8px rgba(0, 255, 0, 0.3);
        }

        .track-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .track-number {
            width: 20px;
            height: 20px;
            background: rgba(0, 255, 0, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 700;
            color: #0f0;
            border: 1px solid #0f0;
        }

        .track-name {
            flex: 1;
            color: #8f8;
            font-weight: 500;
        }

        .track-duration {
            font-size: 10px;
            color: #0f0;
            font-family: 'Orbitron', monospace;
        }

        .active-track {
            background: rgba(0, 255, 0, 0.15);
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.4);
            border: 1px solid #0f0;
        }

        .active-track .track-number {
            background: #0f0;
            color: #000;
        }

        .active-track .track-name {
            color: #0f0;
            font-weight: 700;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 20, 0, 0.5);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: #0f0;
            border-radius: 3px;
        }

        .footer {
            text-align: center;
            font-size: 9px;
            color: #0a0;
            margin-top: 10px;
            z-index: 2;
            position: relative;
            letter-spacing: 1px;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <div class="player">
        <div class="header">
            <div class="logo pulse">NEON RETRO</div>
            <div class="subtitle">MUSIC PLAYER</div>
        </div>

        <div class="visualizer">
            <canvas id="waveCanvas"></canvas>
            <div class="particles" id="particles"></div>
        </div>

        <div class="track-info">
            <div class="track-title" id="trackTitle">SELECT A TRACK</div>
            <div class="track-artist" id="trackArtist">CLICK ON PLAYLIST</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn" id="prevBtn">PREV</button>
            <button class="control-btn play-pause" id="playPauseBtn">PLAY</button>
            <button class="control-btn" id="nextBtn">NEXT</button>
            <button class="control-btn" id="loopBtn">LOOP</button>
        </div>

        <div class="volume-container">
            <span style="color:#0f0; font-size:11px;">VOL</span>
            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80">
        </div>

        <div class="playlist" id="playlist">
            <!-- Tracks will be added here by JavaScript -->
        </div>

        <div class="footer">
            RETRO PLAYER v2.0 | DIRECT STREAM
        </div>
    </div>

    <script>
        // Music tracks with direct URLs
        const tracks = [
            { id: 1, name: "Retro Synth 1", url: "https://audio.jukehost.co.uk/XX17oz6KqB8M6lrnHYYfzOMOEEPnZSHK", duration: "3:45" },
            { id: 2, name: "Neon Dreams", url: "https://audio.jukehost.co.uk/hh2O6DbJvjPvW7JEHEb5UDzIMSnj0cbl", duration: "4:20" },
            { id: 3, name: "Digital Pulse", url: "https://audio.jukehost.co.uk/nFY5k6c8KY9LZJ6hY4nqsqzmHNrxiGLV", duration: "2:55" },
            { id: 4, name: "Cyber Wave", url: "https://audio.jukehost.co.uk/RYc0ju7U8mTU5PMrh2gMWUYyIw9bTAHh", duration: "3:30" },
            { id: 5, name: "Future Bass", url: "https://audio.jukehost.co.uk/eG4V5QGpZfOoUyNhGc5dsNnP6NTLQFVs", duration: "3:15" },
            { id: 6, name: "Glitch Hop", url: "https://audio.jukehost.co.uk/a5e4wPgOQXuLJxoe9g3ce8hyjeAJQwCJ", duration: "4:05" },
            { id: 7, name: "Synth Retro", url: "https://audio.jukehost.co.uk/myCPt9ZjRHciiM0mPRWvGNvrv3UvZVQf", duration: "3:50" },
            { id: 8, name: "Electric Dreams", url: "https://audio.jukehost.co.uk/SgVafxNk6kzCfo5Iz3deO4JKpEeoKMwp", duration: "3:25" },
            { id: 9, name: "Neon Nights", url: "https://audio.jukehost.co.uk/M6UPHVWra0iW7wIS6PxfdbkvUv9MzlYx", duration: "4:10" },
            { id: 10, name: "Digital Rain", url: "https://audio.jukehost.co.uk/9VYjs6t6ssSZcFmdjCpiHUt7KjnGc1VJ", duration: "3:40" },
            { id: 11, name: "Cyber City", url: "https://audio.jukehost.co.uk/NsUgVNeUKz4Yi0rkBV3ML3AeYddJMv4C", duration: "3:55" },
            { id: 12, name: "Retro Future", url: "https://audio.jukehost.co.uk/4ZiTow4VNTU7xwWYKZm4qXrfJXngUViA", duration: "4:00" },
            { id: 13, name: "Neon Drive", url: "https://audio.jukehost.co.uk/I5cPxGB3AI1EReoG7CcjQnzygbPVJ3Ed", duration: "3:20" }
        ];

        // Global variables
        let audioContext;
        let analyser;
        let source;
        let audioElement;
        let isPlaying = false;
        let isLooping = false;
        let currentTrackIndex = 0;
        let particles = [];
        let animationId;

        // Initialize the player
        function initPlayer() {
            // Create audio element
            audioElement = new Audio();
            audioElement.crossOrigin = "anonymous";
            
            // Set up audio context for visualization
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256;
                
                source = audioContext.createMediaElementSource(audioElement);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
            } catch (e) {
                console.error("Web Audio API not supported", e);
            }

            // Set up event listeners
            audioElement.addEventListener('loadedmetadata', updateTrackInfo);
            audioElement.addEventListener('timeupdate', updateProgress);
            audioElement.addEventListener('ended', handleTrackEnd);
            
            // Set initial volume
            audioElement.volume = document.getElementById('volumeSlider').value / 100;
            
            // Initialize playlist
            renderPlaylist();
            
            // Initialize visualizer
            initVisualizer();
        }

        // Render the playlist
        function renderPlaylist() {
            const playlist = document.getElementById('playlist');
            playlist.innerHTML = '';
            
            tracks.forEach((track, index) => {
                const trackItem = document.createElement('div');
                trackItem.className = 'track-item';
                if (index === currentTrackIndex) {
                    trackItem.classList.add('active-track');
                }
                
                trackItem.innerHTML = `
                    <div class="track-number">${track.id}</div>
                    <div class="track-name">${track.name}</div>
                    <div class="track-duration">${track.duration}</div>
                `;
                
                trackItem.addEventListener('click', () => {
                    playTrack(index);
                });
                
                playlist.appendChild(trackItem);
            });
        }

        // Play a specific track
        function playTrack(index) {
            currentTrackIndex = index;
            
            // Stop current playback
            if (isPlaying) {
                audioElement.pause();
                isPlaying = false;
            }
            
            // Load new track
            audioElement.src = tracks[index].url;
            document.getElementById('trackTitle').textContent = tracks[index].name;
            document.getElementById('trackArtist').textContent = `TRACK ${tracks[index].id}`;
            
            // Update active track in playlist
            renderPlaylist();
            
            // Play the track
            togglePlayPause();
        }

        // Update track info when metadata is loaded
        function updateTrackInfo() {
            document.getElementById('duration').textContent = formatTime(audioElement.duration);
        }

        // Update progress bar and time display
        function updateProgress() {
            const progress = document.getElementById('progress');
            const currentTime = document.getElementById('currentTime');
            
            if (audioElement.duration) {
                const percent = (audioElement.currentTime / audioElement.duration) * 100;
                progress.style.width = percent + '%';
                currentTime.textContent = formatTime(audioElement.currentTime);
            }
        }

        // Format time in MM:SS
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Handle track end
        function handleTrackEnd() {
            if (isLooping) {
                audioElement.currentTime = 0;
                audioElement.play();
            } else {
                playNextTrack();
            }
        }

        // Play next track
        function playNextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % tracks.length;
            playTrack(currentTrackIndex);
        }

        // Play previous track
        function playPrevTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + tracks.length) % tracks.length;
            playTrack(currentTrackIndex);
        }

        // Toggle play/pause
        function togglePlayPause() {
            if (!audioElement.src) {
                // If no track is loaded, load the first one
                playTrack(0);
                return;
            }
            
            if (isPlaying) {
                audioElement.pause();
                document.getElementById('playPauseBtn').textContent = 'PLAY';
            } else {
                // Resume audio context if suspended
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                audioElement.play().then(() => {
                    document.getElementById('playPauseBtn').textContent = 'PAUSE';
                    startVisualizer();
                }).catch(e => {
                    console.error("Play failed:", e);
                });
            }
            
            isPlaying = !isPlaying;
        }

        // Toggle loop
        function toggleLoop() {
            isLooping = !isLooping;
            audioElement.loop = isLooping;
            document.getElementById('loopBtn').style.background = isLooping ? 
                'linear-gradient(to bottom, #00c000, #006000)' : 
                'linear-gradient(to bottom, #003000, #001000)';
        }

        // Initialize visualizer
        function initVisualizer() {
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas dimensions
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            // Create particles
            createParticles();
            
            // Start animation loop
            animateVisualizer();
        }

        // Create particles for visualizer
        function createParticles() {
            const container = document.getElementById('particles');
            particles = [];
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random position
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                
                // Random size and opacity
                const size = 2 + Math.random() * 3;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.opacity = 0.4 + Math.random() * 0.6;
                particle.style.background = '#0f0';
                particle.style.borderRadius = '50%';
                particle.style.boxShadow = '0 0 5px #0f0';
                particle.style.position = 'absolute';
                
                container.appendChild(particle);
                particles.push({
                    element: particle,
                    x: Math.random() * 100,
                    y: Math.random() * 100,
                    speed: 0.5 + Math.random() * 1,
                    size: size
                });
            }
        }

        // Start visualizer animation
        function startVisualizer() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            animateVisualizer();
        }

        // Animate visualizer
        function animateVisualizer() {
            const canvas = document.getElementById('waveCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (isPlaying && analyser) {
                // Get frequency data
                const bufferLength = analyser.frequencyBinCount;
                const dataArray = new Uint8Array(bufferLength);
                analyser.getByteFrequencyData(dataArray);
                
                // Draw wave
                ctx.lineWidth = 2;
                ctx.strokeStyle = '#0f0';
                ctx.shadowBlur = 10;
                ctx.shadowColor = '#0f0';
                ctx.beginPath();
                
                const sliceWidth = canvas.width / bufferLength;
                let x = 0;
                
                for (let i = 0; i < bufferLength; i++) {
                    const v = dataArray[i] / 128.0;
                    const y = v * canvas.height / 2;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    x += sliceWidth;
                }
                
                ctx.stroke();
                
                // Draw ocean wave effect
                ctx.strokeStyle = '#8f8';
                ctx.beginPath();
                
                x = 0;
                for (let i = 0; i < bufferLength; i++) {
                    const v = dataArray[i] / 256.0;
                    const y = canvas.height - (v * canvas.height / 2);
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                    
                    x += sliceWidth;
                }
                
                ctx.stroke();
                ctx.shadowBlur = 0;
                
                // Update particles
                updateParticles(dataArray);
            }
            
            animationId = requestAnimationFrame(animateVisualizer);
        }

        // Update particles based on audio data
        function updateParticles(dataArray) {
            const avgFrequency = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;
            
            particles.forEach(particle => {
                // Move particle
                particle.x += particle.speed;
                if (particle.x > 100) particle.x = 0;
                
                // Adjust vertical position based on audio
                const waveHeight = (avgFrequency / 256) * 20;
                particle.y = 50 + Math.sin(particle.x / 10) * waveHeight;
                
                // Update DOM element
                particle.element.style.left = particle.x + '%';
                particle.element.style.top = particle.y + '%';
                
                // Pulse size based on audio
                const pulse = 1 + (avgFrequency / 256) * 1.5;
                particle.element.style.transform = `scale(${pulse})`;
                
                // Change opacity based on audio
                particle.element.style.opacity = 0.4 + (avgFrequency / 256) * 0.6;
            });
        }

        // Set up event listeners
        document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
        document.getElementById('prevBtn').addEventListener('click', playPrevTrack);
        document.getElementById('nextBtn').addEventListener('click', playNextTrack);
        document.getElementById('loopBtn').addEventListener('click', toggleLoop);

        document.getElementById('volumeSlider').addEventListener('input', () => {
            if (audioElement) {
                audioElement.volume = document.getElementById('volumeSlider').value / 100;
            }
        });

        // Initialize on load
        window.addEventListener('load', initPlayer);

        // Handle window resize
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('waveCanvas');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        });
    </script>
</body>
</html>
